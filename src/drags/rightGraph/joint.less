@baseBlue: #5ec1df;

.joint-paper {
  :global {
    .joint-viewport {
      user-select: none;
    }

    /* 节点矩形元素 */
    [magnet="true"]:not(.joint-element) {
      cursor: crosshair;
    }
    [magnet="true"]:not(.joint-element):hover {
      opacity: 0.7;
    }
    .joint-element {
      cursor: pointer;
      // 最外层矩形
      .out-box {
        width: 164px;
        height: 96px;
        background-color: #fff;
        border: 1px solid #e0dbdb;
        border-radius: 5px;
        // box-shadow: 0px 4px #e0dbdb;
        // 直接在本元素加 box-shadow ，拖动时会重绘，严重掉帧卡顿，所以在 :after 上加
        &::after {
          content: "";
          position: absolute;
          z-index: -1;
          display: block;
          width: inherit;
          height: inherit;
          border-radius: inherit;
          box-shadow: 0px 4px #e0dbdb;
          transform: translateY(-66px) translateX(-1px);
        }
        &:hover {
          border-color: @baseBlue;
        }
        // 矩形里的文字
        p {
          height: 64px;
          border-bottom: 2px solid #e7e8ed;
          display: flex;
          justify-content: center;
          align-items: center;
          font-family: PingFangSC-Regular;
          font-size: 14px;
          color: #666666;
          letter-spacing: 0;
          line-height: 22px;
          overflow: hidden;
          padding: 10px;
          &:before {
            content: " ";
            display: block;
            width: 16px;
            min-width: 16px;
            height: 16px;
            margin-right: 5px;
            background-size: 16px;
            background-repeat: no-repeat;
            background-image: url("data:image/png;base64,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");
          }
        }
      }
      // 垃圾箱容器，因为垃圾桶中间的空白无法响应点击事件，所以把点击事件加到这里
      .rubbish-rect {
        width: 16px;
        height: 16px;
        x: 10px;
        y: 72px;
        fill: none;
        pointer-events: all; // 已经用了 fill: none；加这句很重要，否则 hover 不灵
        &:hover ~ .rubbish {
          opacity: 0.7;
        }
      }
      // 垃圾箱
      .rubbish {
        d: path(
          "M15.3333333,4.08333333 L12.75,4.08333333 L12,3.33333333 L8.33333333,3.33333333 L7.58333333,4.08333333 L5,4.08333333 L5,5.58333333 L15.25,5.58333333 L15.25,4.08333333 L15.3333333,4.08333333 Z M5.75,15.1666667 L5.75,6.33333333 L14.5833333,6.33333333 L14.5833333,15.1666667 C14.5833333,16 13.9166667,16.6666667 13.0833333,16.6666667 L7.25,16.6666667 C6.41666667,16.6666667 5.75,16 5.75,15.1666667 Z M8,8 L8,14 L9,14 L9,8 L8,8 Z M11,8 L11,14 L12,14 L12,8 L11,8 Z"
        );
        transform: translateX(5px) translateY(70px);
        opacity: 0.5;
        pointer-events: none;
      }
    }

    /* svg 缩放时的中心点 */
    .joint-viewport {
      transform-origin: center;
    }

    /* 节点的锚点和删除按钮 */
    // 一开始不显示链接端口
    .joint-port-body {
      fill: none;
      pointer-events: all; // 已经用了 fill: none；加这句很重要，否则 hover 不灵
      stroke-width: 0;
      r: 0.5px;
    }
    .joint-element:hover {
      // hover 到节点上显示 端口,半径变大，线宽 2

      .joint-port-body {
        stroke: @baseBlue;
        stroke-width: 2;
        r: 5px;
      }
      // hover 到端口上,半径变小，线宽 12，这样才能增加选中区域面积

      .joint-port-body:hover {
        stroke-width: 12;
        stroke-opacity: 1;
        opacity: 1;
        r: 0.5px;
      }
    }
    // 删除按钮组件
    .delete-button,
    .delete-button-text,
    .delete-cancle-button-text {
      display: none;
      font-size: 12px;
      letter-spacing: 0;
    }
    .delete-cell-show {
      .delete-button {
        display: block;
        cy: 89px;
        cx: -21px;
        r: 15px;
        fill: #ef5350;
        stroke: #f80c0c;
        stroke-width: 0.5px;
      }
      .delete-cancle-button {
        display: block;
        cy: 120px;
        cx: 11px;
        r: 15px;
        fill: #f7f8fa;
        stroke: #d9d1d1;
        stroke-width: 0.7px;
      }
      .delete-button-text {
        display: block;
        transform: translateX(-33px) translateY(94px);
        fill: #ffffff;
        pointer-events: none;
      }
      .delete-cancle-button-text {
        display: block;
        transform: translateX(-1px) translateY(125px);
        fill: #76889c;
        pointer-events: none;
      }
      .rubbish {
        fill: #198bf4;
        opacity: 1;
      }
    }

    /* 连接线 外层的一层遮罩，hover 上去显现 */
    .joint-link {
      .marker-arrowheads {
        display: none;
      }
      .marker-vertices {
        cursor: move;
        opacity: 0;
      }

      .link-tools {
        opacity: 0;
        cursor: pointer;
        .tool-options {
          display: none;
        }
      }
      &:hover {
        .link-tools,
        .marker-vertices {
          opacity: 1;
        }
      }

      .connection {
        fill: none;
      }

      .connection-wrap {
        fill: none;
        stroke: #000000;
        stroke-width: 7;
        stroke-linecap: round;
        stroke-linejoin: round;
        opacity: 0;
        &:hover {
          opacity: 0.3;
          stroke-opacity: 0.3;
        }
      }

      .link-tools .tool-remove {
        circle {
          fill: #f05c2b;
          r: 6;
        }
        path {
          fill: #fff;
          d: path(
            "M -3.5 0.7, -3.5 -0.7, -0.7 -0.7, -0.7 -3.5, 0.7 -3.5, 0.7 -0.7 ,3.5 -0.7, 3.5 0.7, 0.7 0.7, 0.7 3.5, -0.7 3.5,-0.7 0.7 z"
          );
          transform: rotate(45deg) scale(1.5);
        }
      }
    }
  }
}
